<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Supernode 1 - Toronto Community Network</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme-ext/style.css">
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../notice.html">Notice</a></li><li class="chapter-item expanded "><a href="../network/main.html"><strong aria-hidden="true">1.</strong> Network</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../network/standards-ip-address.html"><strong aria-hidden="true">1.1.</strong> IP Address Standard</a></li><li class="chapter-item expanded "><a href="../network/standards-hostname.html"><strong aria-hidden="true">1.2.</strong> Hostname Standard</a></li><li class="chapter-item expanded "><a href="../network/supernode1.html" class="active"><strong aria-hidden="true">1.3.</strong> Supernode 1</a></li><li class="chapter-item expanded "><a href="../network/supernode4.html"><strong aria-hidden="true">1.4.</strong> Supernode 4</a></li><li class="chapter-item expanded "><a href="../network/exit-node.html"><strong aria-hidden="true">1.5.</strong> Exit Node</a></li><li class="chapter-item expanded "><a href="../network/protocol-babel.html"><strong aria-hidden="true">1.6.</strong> Babel</a></li></ol></li><li class="chapter-item expanded "><a href="../hardware/main.html"><strong aria-hidden="true">2.</strong> Hardware</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../hardware/benchmark.html"><strong aria-hidden="true">2.1.</strong> Hardware Benchmark</a></li><li class="chapter-item expanded "><a href="../hardware/benchmark-results.html"><strong aria-hidden="true">2.2.</strong> Hardware Benchmark Results</a></li><li class="chapter-item expanded "><a href="../hardware/router-er-x-sfp.html"><strong aria-hidden="true">2.3.</strong> ER-X-SFP</a></li><li class="chapter-item expanded "><a href="../hardware/cpe-ubiquiti.html"><strong aria-hidden="true">2.4.</strong> CPE - Ubiquiti</a></li></ol></li><li class="chapter-item expanded "><a href="../operations/main.html"><strong aria-hidden="true">3.</strong> Operations</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../operations/working-groups.html"><strong aria-hidden="true">3.1.</strong> Working Groups</a></li><li class="chapter-item expanded "><a href="../operations/learning-group.html"><strong aria-hidden="true">3.2.</strong> Learning Group</a></li><li class="chapter-item expanded "><a href="../operations/legal.html"><strong aria-hidden="true">3.3.</strong> Legal</a></li><li class="chapter-item expanded "><a href="../operations/finances.html"><strong aria-hidden="true">3.4.</strong> Finances</a></li><li class="chapter-item expanded "><a href="../operations/data.html"><strong aria-hidden="true">3.5.</strong> Data</a></li><li class="chapter-item expanded "><a href="../operations/secrets.html"><strong aria-hidden="true">3.6.</strong> Managing Secrets</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Toronto Community Network</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!--
                        Page table of contents 
                        Source: https://github.com/JorelAli/mdBook-pagetoc/blob/3b9165bca3ceb54119001890d3a7e9356b171a72/README.md
                        -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>
                        
                        <h1 id="supernode-1"><a class="header" href="#supernode-1">Supernode 1</a></h1>
<p><img src="images/supernode1-view.jpg" alt="areal view of 3 apartment buildings and a low density neighbourhood taken from the rooftop of Supernode 1" /></p>
<p>Supernode 1 is located on top of 200 Woolner Ave, Toronto, alongside Cisco-deployed infrastructure belonging to the City of Toronto.</p>
<h2 id="network"><a class="header" href="#network">Network</a></h2>
<p>The supernode consists of 4 antennas and a router. The router is connected to the Cisco switch which is connected to the Bell 2000 modem that offers internet access for use as a gateway path.</p>
<p>The router acts as a Babel routing device. The antennas are configured in bridge mode.</p>
<p><img src="images/supernode1-network-layout.png" alt="network diagram consisting of 4 antennas connected to a switch, connected to the internet through a Bell router" /></p>
<h2 id="hardware"><a class="header" href="#hardware">Hardware</a></h2>
<h3 id="antenna-1"><a class="header" href="#antenna-1">Antenna 1</a></h3>
<p>Antenna 1 is a <a href="https://www.ui.com/airmax/liteap-ac/">Ubiquiti LAP-120</a> mounted on the west arm of the building, on the south side of the roof, colocated with Cisco on their mounts. The antenna is facing south.</p>
<p><img src="images/supernode1-hardware-antenna1.jpg" alt="A non-penetrating mount with wireless mesh antennas affixed sitting on an apartment rooftop" /></p>
<h3 id="antenna-2"><a class="header" href="#antenna-2">Antenna 2</a></h3>
<p>Antenna 2 is a Ubiquiti LAP-120 mounted on the south arm of the building, on the east side of the roof, colocated with Cisco on their mounts. The antenna is facing east.</p>
<p><img src="images/supernode1-hardware-antenna2.jpg" alt="A non-penetrating mount with wireless mesh antennas affixed sitting on an apartment rooftop" /></p>
<h3 id="antenna-3-and-4"><a class="header" href="#antenna-3-and-4">Antenna 3 and 4</a></h3>
<p>Antenna 3 and 4 are Ubiquiti LAP-120 devices mounted on the north-east arm of the building. Antenna 3 is facing north-east and antenna 4 is facing north.</p>
<p><img src="images/supernode1-hardware-antenna3and4.jpg" alt="A non-penetrating mount with wireless mesh antennas affixed sitting on an apartment rooftop" /></p>
<h3 id="router-1"><a class="header" href="#router-1">Router 1</a></h3>
<p>Router 1 is a <a href="https://www.ui.com/edgemax/edgerouter-x-sfp/">Ubiquiti EdgeRouter X-SFP</a> mounted inside the Cisco cabinet in the ballast room. It is connected to the exit node over a L2TP tunnel using UDP.</p>
<p>Router is configured with a static IP and only routes to the exit node and a secondary VPS server. The secondary VPS is used to provide an OpenVPN tunnel for secure remote management of the device.</p>
<p><img src="images/supernode1-hardware-cabinet2.jpg" alt="A metal cabinet in a small concrete room, the door is open with the EdgeRouter inside" /></p>
<h2 id="physical-environment"><a class="header" href="#physical-environment">Physical Environment</a></h2>
<p>The roof is accessible through ceiling hatches on the top floor of the building.</p>
<p><img src="images/supernode1-access-roof.jpg" alt="Roof access hatch" /></p>
<p>The router is installed in a black metal cabinet, located on the back wall of the ballast tank room on the roof. This room is accessible only from the roof. The entrance is on the east wall of the elevator hut. The doors are shorter than normal.</p>
<p>Network cables are run through a hole in the east wall.</p>
<p><img src="images/supernode1-access-ballast.jpg" alt="Roof access hole" />
<img src="images/supernode1-hardware-cabinet.jpg" alt="A metal cabinet in a small concrete room, the door is closed" /></p>
<h2 id="neighbourhood-testing"><a class="header" href="#neighbourhood-testing">Neighbourhood Testing</a></h2>
<p>Testing was done at several points that had line-of-sight to the antenna. The antenna was hand-held, not tuned precisely. Results are for reference only, and do not necessarily represent what a permanent deployment could attain at that distance.</p>
<table><thead><tr><th>Point</th><th>Distance (m)</th><th>Ping</th><th>Speed RX/TX (Mbps)</th><th>Signal (dBm)</th></tr></thead><tbody>
<tr><td>a</td><td>200</td><td>4.57</td><td>86/194</td><td>-64</td></tr>
<tr><td>b</td><td>200</td><td>2.86</td><td>80/194</td><td>-60</td></tr>
<tr><td>c</td><td>237</td><td>5.82</td><td>50/178</td><td>-58</td></tr>
<tr><td>d</td><td>270</td><td>5.27</td><td>103/149</td><td>-50</td></tr>
<tr><td>e (1)</td><td>396</td><td>5.11</td><td>83/172</td><td>-58</td></tr>
<tr><td>f</td><td>2520</td><td>4.57</td><td>8.68/1.6</td><td>-81</td></tr>
<tr><td>f (2)</td><td>2520</td><td>4.57</td><td>64.58/40.79</td><td>-74</td></tr>
<tr><td>g</td><td>2660</td><td></td><td>82/123</td><td>-62</td></tr>
<tr><td>g (3)</td><td>2660</td><td></td><td>118/44</td><td>-66</td></tr>
</tbody></table>
<p>(1) Used both <a href="https://www.ui.com/airmax/nanostation-ac/">Nanostation AC (Loco5AC)</a> and <a href="https://www.ui.com/airmax/litebeam-ac/">LiteBeam AC (LBE‑5AC‑23)</a>. Both performed the same.<br />
(2) Second attempt done after correcting issue with <code>sn1a2</code>.<br />
(3) Used <a href="https://www.ui.com/airmax/nanostation-ac/">Nanostation AC (Loco5AC)</a> but could not adjust elevation.</p>
<h2 id="additional-notes"><a class="header" href="#additional-notes">Additional Notes</a></h2>
<p>EdgeRouter X-SFP does not accelerate traffic over tunnels. Due to this, speeds are currently limited to around 400Mbps to exit node.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../network/standards-hostname.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../network/supernode4.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../network/standards-hostname.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../network/supernode4.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="../theme-ext/sidebar.js"></script>
    </body>
</html>
